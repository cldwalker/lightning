class Lightning
  class Generator
    def self.generate(*args)
      shell = args.shift
      send("generate_#{shell}", *args)
    end
    
    def self.generate_bash(commands)
      body = <<-INIT
      #### This file was generated by Lightning. ####
      #Change this to match this project's base directory
      LBIN_PATH="/home/bozo/code/gems/lightning/bin"
      
      INIT
      commands.each do |e|
        body += <<-EOS
          
          ##{e['description'] if e['description']}
          #{e['name']} () {
            #{e['map_to']} `$LBIN_PATH/lightning-full_path.rb #{e['path_key']} $@`#{e['post_path'] if e['post_path']}
          }
          complete -o default -C "$LBIN_PATH/lightning-complete.rb #{e['path_key']}" #{e['name']}
        EOS
      end
      body.gsub(/^([ \t\r\f])+/, '')
    end
  end
end